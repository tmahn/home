#!/bin/bash

set -eu

PROG="$(basename -- "${0}")"

EASY_INSTALL_HEADER="$(which easy_install |xargs head -n1)"
if ! [ "${EASY_INSTALL_HEADER:0:2}" = "#!" ]; then
    echo "${PROG}: RTFSRC" 1>&2
    exit 1
fi
PYTHON_VERSION="$(${EASY_INSTALL_HEADER#??} -c 'import sys; print sys.version[:3]')"

mkdir -p "${HOME}/opt/python${PYTHON_VERSION}/lib/python${PYTHON_VERSION}/site-packages"
mkdir -p "${HOME}/opt/python${PYTHON_VERSION}/src/python${PYTHON_VERSION}/site-packages"
mkdir -p "${HOME}/opt/python${PYTHON_VERSION}/bin"

easy_install \
    -f "
        http://sourceforge.net/projects/pylibacl/download
        http://sourceforge.net/projects/psyco/download
        http://duplicity.nongnu.org/
        http://www.jorendorff.com/articles/python/path/index.html
        " \
    \
    "${@}" \
    \
    BeautifulSoup \
    CherryPy \
    FormEncode \
    GnuPGInterface \
    Paste \
    PyXML \
    PyZ3950 \
    SQLObject \
    cfgparse \
    duplicity \
    enum \
    httplib2 \
    iso8601 \
    kid \
    logilab.pylintinstaller \
    path \
    psyco \
    py \
    pylibacl \
    pylint \
    pymarc \
    pytz \
    simplejson \
    xattr \
