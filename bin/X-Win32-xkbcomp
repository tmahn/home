#!/bin/bash

XWINDIR="/d/c/Program Files (x86)/StarNet/X-Win32 9.5"

function push() {
    local ARRAY_NAME="${1}"
    shift
    for ARG in "${@}"; do
        eval "${ARRAY_NAME}[\${#${ARRAY_NAME}[@]}]=\${ARG}"
    done
}

# any -I arguments passed in on the command line have to go before the
# system include
ARGS=()

while [ "${1:0:2}" = "-I" ]; do
    push ARGS "${1}"
    shift
done

push ARGS "-I$(cygpath -m "${XWINDIR}/xkb")"

exec "${XWINDIR}/xkbcomp" "${ARGS[@]}" "${@}"
