#!/bin/bash

# would probably be a lot cleaner using the --{start,end}-{insert,delete}
# options to wdiff

wdiff -dn \
    | sed \
        -e 's/&/\&amp;/g' \
        -e 's/</\&lt;/g' \
        -e 's/>/\&gt;/g' \
    | sed -e \
        's/\[-/<font color="red"><s>/g' \
        -e 's/-\]/<\/s><\/font>/g' \
        -e 's/{+/<font color="blue">/g' \
        -e 's/+}/<\/font>/g' \
        -e 's/\\r/<br>/g' \
        -e 's/$/<br>/g'
